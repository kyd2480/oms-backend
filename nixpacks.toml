# Railway Nixpacks 설정 - 안정성 최적화
[phases.setup]
nixPkgs = ["openjdk17"]

[phases.build]
# 빌드 안정성: 테스트 스킵, 데몬 비활성화, 병렬 빌드
cmds = [
  "./gradlew clean build -x test --no-daemon --parallel --max-workers=2"
]

[start]
# 시작 안정성: 메모리 제한, GC 최적화, 타임존 설정
# Railway는 자체적으로 healthcheck를 수행하므로 앱은 단순히 실행만 함
cmd = "java -Xms256m -Xmx512m -XX:+UseG1GC -XX:MaxGCPauseMillis=100 -Dserver.port=$PORT -Dspring.profiles.active=prod -Duser.timezone=Asia/Seoul -jar build/libs/*.jar"
